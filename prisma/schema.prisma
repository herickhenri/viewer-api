// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Equipment {
  id          String    @id @default(cuid())
  tag         String    @unique
  name        String
  description String?
  photos      Photo[]
  markings    marking[]

  @@map("equipaments")
}

model Photo {
  key         String     @id
  link        String     @unique
  Equipment   Equipment? @relation(fields: [equipmentId], references: [id])
  equipmentId String?

  @@map("photos")
}

model Panorama {
  id         String    @id @default(cuid())
  name       String
  image_key  String
  image_link String
  gps_x      Decimal?
  gps_y      Decimal?
  markings   marking[]
  links      Link[]

  @@map("panoramas")
}

model marking {
  coord_x Int
  coord_y Int

  equipment    Equipment @relation(fields: [equipment_id], references: [id])
  equipment_id String

  panorama    Panorama @relation(fields: [panorama_id], references: [id])
  panorama_id String

  @@id([panorama_id, equipment_id])
  @@map("markings")
}

model Link {
  id String @id @default(cuid())

  coord_x             Int
  coord_y             Int
  panorama_connect_id String

  Panorama    Panorama @relation(fields: [panorama_id], references: [id])
  panorama_id String

  @@map("links")
}
